# 26.GCP-PubSub-lambda

## Описание

1. Приложение - заготовка для социальной сети. Nginx маршрутизирует запросы на
бэкэнд и фронтэнд. По регистрации пользователя отправляется сообщение в топик
Pub/Sub, cloud function срабатывает по добавлению в топик.

2. Cloud funcion хранится в репозитории прямо в проекте в GCP, показалось очень
удобным, прямо неприлично удобным.

## Notes

### 1. У приложения должен быть доступ к PubSub службе

Чтобы у приложения запущенного на Compute Engine был доступ,
есть 2 варианта:

1. Создать ServiceAccount и дать ему права на работу с Pub/Sub. И настроить
окружение для приложения: получить файл с ключом для ServiceAccount, указать
путь к файлу в переменную окружения GOOGLE_APPLICATION_CREDENTIALS.
2. Указать ServiceAccount для виртуальной машины у которого есть нужные права
на работу с Pub/Sub.

SDK библиотеки для работы c GCP смотрять сначала в переменную окружения, если
там не находят файла с ключом, то работают от ServiceAccount, который
указан для виртуалки.
